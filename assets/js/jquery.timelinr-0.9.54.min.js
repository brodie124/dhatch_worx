/* ----------------------------------
jQuery Timelinr 0.9.54
tested with jQuery v1.6+

Copyright 2011, CSSLab.cl
Free under the MIT license.
http://www.opensource.org/licenses/mit-license.php

instructions: http://www.csslab.cl/2011/08/18/jquery-timelinr/
---------------------------------- */

function autoPlay(){var s=jQuery(settings.datesDiv).find("a."+settings.datesSelectedClass);"forward"==settings.autoPlayDirection?s.parent().is("li:last-child")?jQuery(settings.datesDiv+" li:first-child").find("a").trigger("click"):s.parent().next().find("a").trigger("click"):"backward"==settings.autoPlayDirection&&(s.parent().is("li:first-child")?jQuery(settings.datesDiv+" li:last-child").find("a").trigger("click"):s.parent().prev().find("a").trigger("click"))}jQuery.fn.timelinr=function(s){settings=jQuery.extend({orientation:"horizontal",containerDiv:"#timeline",datesDiv:"#dates",datesSelectedClass:"selected",datesSpeed:"normal",issuesDiv:"#issues",issuesSelectedClass:"selected",issuesSpeed:"fast",issuesTransparency:.2,issuesTransparencySpeed:500,prevButton:"#prev",nextButton:"#next",arrowKeys:"false",startAt:1,autoPlay:"false",autoPlayDirection:"forward",autoPlayPause:2e3},s),jQuery(function(){var s=jQuery(settings.datesDiv+" li").length,t=jQuery(settings.issuesDiv+" li").length,e=(jQuery(settings.datesDiv).find("a."+settings.datesSelectedClass),jQuery(settings.issuesDiv).find("li."+settings.issuesSelectedClass),jQuery(settings.containerDiv).width()),i=jQuery(settings.containerDiv).height(),n=(jQuery(settings.issuesDiv).width(),jQuery(settings.issuesDiv).height(),jQuery(settings.issuesDiv+" li").width()),a=jQuery(settings.issuesDiv+" li").height(),r=(jQuery(settings.datesDiv).width(),jQuery(settings.datesDiv).height(),jQuery(settings.datesDiv+" li").width()),u=jQuery(settings.datesDiv+" li").height();if("horizontal"==settings.orientation){jQuery(settings.issuesDiv).width(n*t),jQuery(settings.datesDiv).width(r*s).css("marginLeft",e/2-r/2);var g=parseInt(jQuery(settings.datesDiv).css("marginLeft").substring(0,jQuery(settings.datesDiv).css("marginLeft").indexOf("px")))}else if("vertical"==settings.orientation){jQuery(settings.issuesDiv).height(a*t),jQuery(settings.datesDiv).height(u*s).css("marginTop",i/2-u/2);var g=parseInt(jQuery(settings.datesDiv).css("marginTop").substring(0,jQuery(settings.datesDiv).css("marginTop").indexOf("px")))}jQuery(settings.datesDiv+" a").click(function(t){t.preventDefault();var e=(jQuery(this).text(),jQuery(this).parent().prevAll().length);"horizontal"==settings.orientation?jQuery(settings.issuesDiv).animate({marginLeft:-n*e},{queue:!1,duration:settings.issuesSpeed}):"vertical"==settings.orientation&&jQuery(settings.issuesDiv).animate({marginTop:-a*e},{queue:!1,duration:settings.issuesSpeed}),jQuery(settings.issuesDiv+" > li").animate({opacity:settings.issuesTransparency},{queue:!1,duration:settings.issuesSpeed}).removeClass(settings.issuesSelectedClass).eq(e).addClass(settings.issuesSelectedClass).fadeTo(settings.issuesTransparencySpeed,1),1==s?jQuery(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==s?jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.prevButton).fadeOut("fast"),jQuery(settings.nextButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&(jQuery(settings.nextButton).fadeOut("fast"),jQuery(settings.prevButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.nextButton).fadeIn("fast"),jQuery(settings.prevButton).fadeOut("fast")):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.prevButton).fadeIn("fast"),jQuery(settings.nextButton).fadeOut("fast")):jQuery(settings.nextButton+","+settings.prevButton).fadeIn("slow"),jQuery(settings.datesDiv+" a").removeClass(settings.datesSelectedClass),jQuery(this).addClass(settings.datesSelectedClass),"horizontal"==settings.orientation?jQuery(settings.datesDiv).animate({marginLeft:g-r*e},{queue:!1,duration:"settings.datesSpeed"}):"vertical"==settings.orientation&&jQuery(settings.datesDiv).animate({marginTop:g-u*e},{queue:!1,duration:"settings.datesSpeed"})}),jQuery(settings.nextButton).bind("click",function(e){e.preventDefault();var i=jQuery(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index();if("horizontal"==settings.orientation){{var r=parseInt(jQuery(settings.issuesDiv).css("marginLeft").substring(0,jQuery(settings.issuesDiv).css("marginLeft").indexOf("px")));parseInt(jQuery(settings.datesDiv).css("marginLeft").substring(0,jQuery(settings.datesDiv).css("marginLeft").indexOf("px")))}-(n*t-n)>=r?(jQuery(settings.issuesDiv).stop(),jQuery(settings.datesDiv+" li:last-child a").click()):jQuery(settings.issuesDiv).is(":animated")||jQuery(settings.datesDiv+" li").eq(i+1).find("a").trigger("click")}else if("vertical"==settings.orientation){{var r=parseInt(jQuery(settings.issuesDiv).css("marginTop").substring(0,jQuery(settings.issuesDiv).css("marginTop").indexOf("px")));parseInt(jQuery(settings.datesDiv).css("marginTop").substring(0,jQuery(settings.datesDiv).css("marginTop").indexOf("px")))}-(a*t-a)>=r?(jQuery(settings.issuesDiv).stop(),jQuery(settings.datesDiv+" li:last-child a").click()):jQuery(settings.issuesDiv).is(":animated")||jQuery(settings.datesDiv+" li").eq(i+1).find("a").trigger("click")}1==s?jQuery(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==s?jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.prevButton).fadeOut("fast"),jQuery(settings.nextButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&(jQuery(settings.nextButton).fadeOut("fast"),jQuery(settings.prevButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?jQuery(settings.prevButton).fadeOut("fast"):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?jQuery(settings.nextButton).fadeOut("fast"):jQuery(settings.nextButton+","+settings.prevButton).fadeIn("slow")}),jQuery(settings.prevButton).click(function(t){t.preventDefault();var e=jQuery(settings.issuesDiv).find("li."+settings.issuesSelectedClass).index();if("horizontal"==settings.orientation){{var i=parseInt(jQuery(settings.issuesDiv).css("marginLeft").substring(0,jQuery(settings.issuesDiv).css("marginLeft").indexOf("px")));parseInt(jQuery(settings.datesDiv).css("marginLeft").substring(0,jQuery(settings.datesDiv).css("marginLeft").indexOf("px")))}i>=0?(jQuery(settings.issuesDiv).stop(),jQuery(settings.datesDiv+" li:first-child a").click()):jQuery(settings.issuesDiv).is(":animated")||jQuery(settings.datesDiv+" li").eq(e-1).find("a").trigger("click")}else if("vertical"==settings.orientation){{var i=parseInt(jQuery(settings.issuesDiv).css("marginTop").substring(0,jQuery(settings.issuesDiv).css("marginTop").indexOf("px")));parseInt(jQuery(settings.datesDiv).css("marginTop").substring(0,jQuery(settings.datesDiv).css("marginTop").indexOf("px")))}i>=0?(jQuery(settings.issuesDiv).stop(),jQuery(settings.datesDiv+" li:first-child a").click()):jQuery(settings.issuesDiv).is(":animated")||jQuery(settings.datesDiv+" li").eq(e-1).find("a").trigger("click")}1==s?jQuery(settings.prevButton+","+settings.nextButton).fadeOut("fast"):2==s?jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?(jQuery(settings.prevButton).fadeOut("fast"),jQuery(settings.nextButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)&&(jQuery(settings.nextButton).fadeOut("fast"),jQuery(settings.prevButton).fadeIn("fast")):jQuery(settings.issuesDiv+" li:first-child").hasClass(settings.issuesSelectedClass)?jQuery(settings.prevButton).fadeOut("fast"):jQuery(settings.issuesDiv+" li:last-child").hasClass(settings.issuesSelectedClass)?jQuery(settings.nextButton).fadeOut("fast"):jQuery(settings.nextButton+","+settings.prevButton).fadeIn("slow")}),"true"==settings.arrowKeys&&("horizontal"==settings.orientation?jQuery(document).keydown(function(s){39==s.keyCode&&jQuery(settings.nextButton).click(),37==s.keyCode&&jQuery(settings.prevButton).click()}):"vertical"==settings.orientation&&jQuery(document).keydown(function(s){40==s.keyCode&&jQuery(settings.nextButton).click(),38==s.keyCode&&jQuery(settings.prevButton).click()})),jQuery(settings.datesDiv+" li").eq(settings.startAt-1).find("a").trigger("click"),"true"==settings.autoPlay&&setInterval("autoPlay()",settings.autoPlayPause)})};